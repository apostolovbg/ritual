# RITUAL Backend

**Version 0.7.4**

This repository contains the backend API for the RITUAL platform. The project follows a backend-first strategy. Previous design details from `AGENTS.json` have been folded into the documentation and the file has been removed.

## Setup

1. Create a virtual environment and install dependencies:

```bash
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```
This environment has unrestricted internet access, so dependency installation will succeed.
If new packages are required, request they be added to the start script.
2. Copy `.env.example` to `.env` and adjust values if needed. Only `DATABASE_URL` and `SECRET_KEY` are required when not using the defaults.

3. Start the development server:

```bash
uvicorn app.main:app --reload
```

## Environment Variables

Configuration values can be provided via environment variables or a `.env` file. Important keys:

- `DATABASE_URL` — SQLAlchemy database connection string
- `SECRET_KEY` — JWT signing secret
- `ALGORITHM` — token algorithm (default `HS256`)
- `ACCESS_TOKEN_EXPIRE_MINUTES` — token lifetime


## Docker Usage

The application can also run inside a container. Build the image and start the server with:

```bash
docker build -t ritual .
docker run --env-file .env -p 8000:8000 ritual
```

This is the recommended way to deploy the API on platforms such as Render or Railway.

## Documentation

- `AGENTS.md` contains development guidelines.
- `CHANGELOG.md` tracks project history.
- `PLAN.md` outlines the current development roadmap.
- Interactive API documentation is auto-generated by FastAPI and available at `http://localhost:8000/docs` when the server is running.

## Endpoints

Phase 1 delivered user authentication. Phase 2 added event creation and booking requests. Main routes include:

- `POST /register` — create a user
- `POST /login` — obtain a JWT token
- `GET /me` — fetch the current user
- `PUT /me/profile` — update artist or club profile
- `POST /events` — create an event (club only)
- `GET /events` — list events
- `GET /events/{id}` — get a single event
- `POST /bookings` — request booking (artist only)
- `GET /my-bookings` — view bookings for the current user

## Development Roadmap

The project has progressed through the initial phases defined by the original design (formerly kept in `AGENTS.json`):

- **Phase 0** – Repository setup with documentation.
- **Phase 1** – User registration, login and profile management.
- **Phase 2** – Event management and booking endpoints.
- **Phase 3** – Deployment readiness with Docker and CI.

Version 0.7.4 repackages documentation updates after resolving merge conflicts. The immediate next tasks are implementing CORS and CSRF protection, adding rate limiting, and addressing GDPR/CDPA compliance.

## Versioning Policy

Patch versions (e.g., `0.7.4` to `0.7.5`) may be incremented automatically for documentation or bug fixes. Minor or major version bumps (e.g., `0.7.x` to `0.8.0`) happen only at human request. Whenever the version changes, update every file that displays the version string.

